{
   "$schema":"http://json-schema.org/draft-07/schema#",
   "$id":"https://swarm-analytics.com/schema/event/trafficmonitoring/1.0",
   "title":"Traffic Monitoring Event Schema",
   "definitions":{
      "id":{
         "type":"string",
         "examples":[
            "56317209-9B83-43A6-A63E-58C9191A7869"
         ]
      },
      "zone":{
         "type":"object",
         "properties":{
            "zoneId":{
               "$ref":"#/definitions/id"
            },
            "name":{
               "type":"string"
            }
         },
         "required":[
            "zoneId"
         ]
      },
      "trafficEvent":{
         "properties":{
            "classification":{
               "type":"string",
               "enum":[
                  "car",
                  "truck",
                  "person",
                  "bicycle",
                  "motorbike",
                  "bus"
               ]
            },
            "entry":{
               "properties":{
                  "zone":{
                     "$ref":"#/definitions/zone"
                  },
                  "timestamp":{
                     "type":"string",
                     "format":"date-time"
                  }
               },
               "required":[
                  "zone",
                  "timestamp"
               ]
            },
            "exit":{
               "properties":{
                  "zone":{
                     "$ref":"#/definitions/zone"
                  },
                  "timestamp":{
                     "type":"string",
                     "format":"date-time"
                  }
               },
               "required":[
                  "zone",
                  "timestamp"
               ]
            },
            "movementPath":{
               "type":"array",
               "items":{
                  "type":"object",
                  "properties":{
                     "timestamp":{
                        "type":"string",
                        "format":"date-time"
                     },
                     "x":{
                        "type":"number"
                     },
                     "y":{
                        "type":"number"
                     },
                     "w":{
                        "type":"number"
                     },
                     "h":{
                        "type":"number"
                     }
                  },
                  "required":[
                     "x",
                     "y",
                     "w",
                     "h",
                     "timestamp"
                  ]
               }
            }
         },
         "required":[
            "classification",
            "entry",
            "exit",
            "movementPath"
         ]
      }
   },
   "type":"object",
   "properties":{
      "version":{
         "type":"string",
         "const":"1.0"
      },
      "node":{
         "properties":{
            "id":{
               "$ref":"#/definitions/id"
            },
            "name":{
               "type":"string"
            }
         },
         "required":[
            "id",
            "name"
         ]
      },
      "trafficEvent":{
         "$ref":"#/definitions/trafficEvent"
      }
   },
   "required":[
      "version",
      "node",
      "trafficEvent"
   ],
   "additionalProperties":false
}
